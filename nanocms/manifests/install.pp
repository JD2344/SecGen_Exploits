# Class: nanocms
# Install Process for nanocms
#
class nanocms::install {
  Exec { path => [ '/bin/', '/sbin/' , '/usr/bin/', '/usr/sbin/' ] }

  # TODO: Check further package deps
  $releasename = 'nanocms.zip'
  file { "/usr/local/src/${releasename}":
    ensure => file,
    source => "puppet:///modules/nanocms/${releasename}"
  }
  -> exec { 'unpack-nanocms':
    cwd     => '/usr/local/src',
    command => "unzip ${releasename} -d /var/www",
    creates => "/var/www/${releasename}"
  }
  -> exec { 'chown-nanocms':
    command => 'chown www-data. /var/www -R',
  }
}
